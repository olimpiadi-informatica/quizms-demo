import initialBlocks from "./initial-blocks.json";
import customBlocks from "./s3.blocks.yaml";
import testcases from "./testcases.py";
import Visualizer from "./visualizer.jsx";

Bunny stayed up late studying in his room tonight, while his friends have already started dinner together around the campfire in the garden.
Now Bunny wants to join them, but there's a problem: he's afraid of the dark, so he's not willing to enter a room unless he turns on the light first.
On the other hand, Bunny is also very environmentally conscious and doesn't want to leave lights on before going outside... not even those his friends forgot to turn off!

Bunny's farm is made up of $N$ rooms arranged in a row, like a long corridor, separated by doors and numbered $1$, $2$, $\ldots$, $N$.
The garden outside of the farm is represented as room number zero.
In each room there are two switches, which are used to turn on the lights in the rooms to the right and left.
The light in the first room can also be turned on and off from the outside.
When a switch is pressed, it turns the light on if it is off, and turns it off if it is on.
You have these blocks available:

  - `N`: the number of rooms.
  - `current room`: the current room number, $0$ (outside) or $1$ to $N$ (rooms).
  - `move right/left`: move to the room to the right/left of the current room.
  - `press the right/left switch`: press the switch that controls the room to the right/left.
  - `right/left light on/off`: true if the light in the room to the right/left is on/off.
  - `terminate`: reach your friends for dinner around the campfire.

Help Bunny turn off the lights and reach his friends, without ever being in the dark! 

<Blockly
  customBlocks={customBlocks}
  initialBlocks={initialBlocks}
  testcases={testcases}
  visualizer={Visualizer}
/>

> A possible correct program is the following:
>
> ![solution](code.png)
>
> First, Bunny must check that no lights are still on to his right, and
> then he walks through all the rooms going to the right until the last room (number $N$).
> Before going right, however, he must check if the light was off,
> turning it on to avoid his fear of the dark.
>
> At the end of this first loop, Bunny will be in the last room of the farm, and can
> start going back, turning off the lights behind him. He then proceeds with another loop
> where he goes left, as always checking first if the light to his left (where he wants to go)
> is off, and if so, he turns it on. After moving left, he turns off the light in the room
> he came from.
>
> This second loop ends when Bunny has reached the first room of the farm, having turned off all
> the other lights. He will then only have to exit, turn off the light in the first room, and then reach his friends!